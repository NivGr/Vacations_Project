(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{235:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),i=a(19),o=a.n(i),r=(a(95),a(9)),l=a(10),c=a(12),u=a(11),d=a(13),p=a(29),m=a(22),h=a(6),v=a.n(h),f=a(21),g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[null],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"IS_LOGIN_SUCCESSFUL":return[t.payload];default:return e}},E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"IS_ADMIN":return t.payload;default:return e}},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SEND_VACATIONS":return[t.payload];default:return e}},b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_USERNAME":return t.payload;default:return e}},k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_USERID":return t.payload;default:return e}},w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_COOKIE":return t.payload;default:return e}},C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"IS_AVAILABLE":return t.payload;default:return e}},D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_CREDS":return t.payload;default:return e}},O=Object(f.c)({isLoginSuccess:g,isAdmin:E,getUsername:b,getUserId:k,getCookie:w,getVacations:y,isAvailable:C,getLoginCreds:D}),S=a(7),A=a(81),I=(a(118),a(24)),x=a(2),_=a.n(x),j=function(){return function(e){return v.a.get("http://localhost:4000/vacations/api/check").then(function(t){var a=t.data;e(L(a))}).catch(function(e){return console.log(e)})}},V=function(e){return{type:"IS_AVAILABLE",payload:e}},L=function(e){return{type:"GET_COOKIE",payload:e}},N=function(e){return{type:"GET_USERNAME",payload:e}},U=function(e){return{type:"GET_USERID",payload:e}},F=function(e){return{type:"IS_LOGIN_SUCCESSFUL",payload:e}},M=function(e){return{type:"IS_ADMIN",payload:e}},P=function(){return function(e){return v.a.get("http://localhost:4000/vacations/api/main").then(function(t){var a=t.data;e(T(a)),e(M(a.isAdmin)),e(N(a.username)),e(U(a.userId))}).catch(function(e){return console.log(e)})}},T=function(e){return{type:"SEND_VACATIONS",payload:e}},B=a(52),G=a.n(B),R=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={username:"",password:"",validateCreds:!1},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"onChange",value:function(e,t){this.setState(Object(I.a)({},e,t))}},{key:"clickLogin",value:function(){this.setState({validateCreds:!0}),this.props.loginUser(_.a.omit(this.state,"validateCreds"))}},{key:"shouldComponentUpdate",value:function(e,t){return this.state!==t||this.props.isLoginSuccess!==e.isLoginSuccess||this.props.userFromCookie!==e.userFromCookie}},{key:"render",value:function(){var e=this;return _.a.isEmpty(this.props.userFromCookie)||this.props.history.push("/vacations/main"),""===this.props.userFromCookie?null:s.a.createElement("div",{class:"container"},s.a.createElement("div",{class:"row"},s.a.createElement("div",{class:"loginInputs col s12 m8 offset-m2 l5 offset-l4 z-depth-1 grey lighten-4",style:{paddingBottom:"30px",paddingTop:"10px",height:"600px"}},s.a.createElement("div",{class:"row"},s.a.createElement("img",{id:"logo",src:G.a,class:"col s12 offset-s4 m12 offset-m4",style:{width:"40%",height:"40%",marginTop:"5px"}})),s.a.createElement("div",{class:"row"},s.a.createElement("div",{class:"input-field col l12 s12",style:{marginTop:"20px"}},s.a.createElement("input",{id:"username",type:"text",class:"validate",value:this.state.useename,onChange:function(t){var a=t.target;return e.onChange("username",a.value)}}),s.a.createElement("label",{for:"username"},"Username"))),s.a.createElement("div",{class:"row"},s.a.createElement("div",{class:"input-field col l12 s12"},s.a.createElement("input",{id:"password",type:"password",class:"validate",value:this.state.password,onChange:function(t){var a=t.target;return e.onChange("password",a.value)}}),s.a.createElement("label",{for:"password"},"Password")),s.a.createElement("div",{className:"loginErrorHandle col s8 offset-s3",style:{display:!1===this.props.isLoginSuccess[0]&&this.state.validateCreds?"block":"none",color:"red"}},"Username or Password incorrect")),s.a.createElement("div",{class:"row"},s.a.createElement("button",{class:"btn waves-effect waves-light col s11",style:{marginTop:"-10px",marginLeft:"4%"},type:"submit",name:"action",onClick:function(){return e.clickLogin()}},"Login",s.a.createElement("i",{class:"material-icons right"}))),s.a.createElement("div",{class:" signupBtn center-align",style:{textAlign:"center",marginTop:"50px",marginBottom:"10px"}},s.a.createElement("a",{class:"col l12 s12"},"Don't have a user yet? Click to sign up"),s.a.createElement("button",{class:"btn waves-effect waves-light center-align col s11",type:"submit",name:"action",onClick:function(){return e.props.history.push("/vacations/signup")},style:{marginLeft:"3%"}},"Signup",s.a.createElement("i",{class:"material-icons right"}))))))}},{key:"componentDidUpdate",value:function(e,t){e.isLoginSuccess!==this.props.isLoginSuccess&&this.props.isLoginSuccess[0]&&this.props.history.push("/vacations/main")}},{key:"componentDidMount",value:function(){this.props.checkCookie()}}]),t}(s.a.Component),q=Object(S.b)(function(e){return{isLoginSuccess:e.isLoginSuccess,isAdmin:e.isAdmin,userFromCookie:e.getCookie,credentials:e.getLoginCreds}},function(e){return{loginUser:function(t){return e((a=t,function(e){return v.a.post("http://localhost:4000/vacations/api/login",a).then(function(t){var a=t.data;"Invalid User/Pass"!==a?(e(F(!0)),e(M(a.isAdmin)),e(N(a.username)),e(U(a.userId))):e(F(!1))}).catch(function(t){return e(F(!1))})}));var a},checkCookie:function(){return e(j())}}})(R),z=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={first:"",last:"",username:"",password:"",passwordAuth:"",usernameAvailability:null,validation:!1,passwordValid:!1},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"shouldComponentUpdate",value:function(e,t){return this.state!==t||this.props.isAvailable!==e.isAvailable||this.props.userFromCookie!==e.userFromCookie}},{key:"onChange",value:function(e,t){"username"===e&&this.props.checkAvailabilty(t),this.setState(Object(I.a)({},e,t))}},{key:"signupClick",value:function(){return _.a.filter(this.state,function(e){return""===e}).length>0||!1===this.props.isAvailable?(this.setState({validation:!0}),null):this.state.password!==this.state.passwordAuth?(this.setState({passwordValid:!0}),null):(this.setState({validation:!1,passwordValid:!1}),this.props.signupUser(this.state),void this.props.history.push("/vacations"))}},{key:"render",value:function(){var e=this;return this.props.userFromCookie.length>0&&this.props.history.push("/vacations"),s.a.createElement("div",{class:"container"},s.a.createElement("div",{class:"row"},s.a.createElement("div",{class:"signupForm col m7 offset-m3 s12 z-depth-1 grey lighten-4"},s.a.createElement("div",{class:"row"},s.a.createElement("ul",{class:"collection"},s.a.createElement("li",{class:"collection-item avatar"},s.a.createElement("span",{class:"title",style:{fontSize:"20px",marginTop:"-5px"}},"Sign Up Form"),s.a.createElement("p",null,"Please fill all the fields up, try and think of an original username"))),s.a.createElement("div",{class:"input-field col m6 s6"},s.a.createElement("input",{id:"first_name",type:"text",class:"validate",onChange:function(t){var a=t.target;return e.onChange("first",a.value)},required:!0}),s.a.createElement("label",{for:"first_name"},"First Name"),s.a.createElement("div",{style:{color:"red",display:this.state.validation&&0===this.state.first.length?"block":"none"}},"Please enter your first name")),s.a.createElement("div",{class:"input-field col m6 s6"},s.a.createElement("input",{id:"last_name",type:"text",class:"validate",onChange:function(t){var a=t.target;return e.onChange("last",a.value)},required:!0}),s.a.createElement("label",{for:"last_name"},"Last Name"),s.a.createElement("div",{style:{color:"red",display:this.state.validation&&0===this.state.last.length?"block":"none"}},"Please enter last name in"))),s.a.createElement("div",{class:"row"},s.a.createElement("div",{class:"input-field col m12 s12"},s.a.createElement("input",{id:"user_name",type:"text",class:"validate col s9",onChange:function(t){var a=t.target;return e.onChange("username",a.value)},required:!0}),s.a.createElement("label",{for:"user_name"},"Username"),s.a.createElement("i",{class:"material-icons col s2 offset-s1",style:{color:!0===this.props.isAvailable&&""!==this.state.username?"lightgreen":"red"}},!0===this.props.isAvailable&&""!==this.state.username?"check":"cancel"),s.a.createElement("div",{className:"col s12",style:{color:"red",display:this.state.validation&&0===this.state.username.length?"block":"none"}},"Please enter a username"),s.a.createElement("div",{className:"col s12",style:{color:"red",display:this.state.validation&&!1===this.props.isAvailable?"block":"none"}},"Username already taken"))),s.a.createElement("div",{class:"row"},s.a.createElement("div",{class:"input-field col m12 s12"},s.a.createElement("input",{id:"password",type:"password",class:"validate",onChange:function(t){var a=t.target;return e.onChange("password",a.value)},required:!0}),s.a.createElement("label",{for:"password"},"Password"),s.a.createElement("div",{style:{color:"red",display:this.state.validation&&0===this.state.password.length?"block":"none"}},"Please enter a password"))),s.a.createElement("div",{class:"row"},s.a.createElement("div",{class:"input-field col m12 s12"},s.a.createElement("input",{id:"passwordAuth",type:"password",class:"validate",onChange:function(t){var a=t.target;return e.onChange("passwordAuth",a.value)},required:!0}),s.a.createElement("label",{for:"passwordAuth"},"Authenticate Password"),s.a.createElement("div",{style:{color:"red",display:this.state.validation&&0===this.state.passwordAuth.length?"block":"none"}},"Please authenticate your password"),s.a.createElement("div",{style:{color:"red",display:this.state.passwordValid?"block":"none"}},"Password authentication does not match password"))),s.a.createElement("div",{class:"signupBtn"},s.a.createElement("button",{class:"btn waves-effect waves-light col m6 offset-m3 s4 offset-s4",type:"submit",name:"action",style:{marginBottom:"15px"},onClick:function(){return e.signupClick()}},"Signup",s.a.createElement("i",{class:"material-icons right"}))),s.a.createElement("div",{class:"backToLogin col s12",style:{marginRight:"4%"}},s.a.createElement("p",null,s.a.createElement("a",{class:"col s12 offset-s2 l12 offset-l3 m12 offset-m3 xl12 offset-xl4",onClick:function(){return e.props.history.push("/vacations")}},"Get Back to Login Screen"))))))}},{key:"componentDidMount",value:function(){this.props.checkCookie()}}]),t}(s.a.Component),J=Object(S.b)(function(e){return{isAvailable:e.isAvailable,userFromCookie:e.getCookie}},function(e){return{signupUser:function(t){return e((a=t,function(e){return v.a.put("http://localhost:4000/vacations/api/signup",a).then(function(e){e.data,alert("Signup Successful!")}).catch(function(e){return console.log(e)})}));var a},checkAvailabilty:function(t){return e(function(e){return function(t){return v.a.get("http://localhost:4000/vacations/api/checkAvailability/".concat(e)).then(function(e){e.data.length>0?t(V(!1)):t(V(!0))}).catch(function(e){return console.log(e)})}}(t))},checkCookie:function(){return e(j())}}})(z),H=a(42),$=a(85),K=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={id:0,description:"",destination:"",fromDate:"",toDate:"",price:null,image:null,validation:!1},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"vacationHandler",value:function(){if(void 0!==this.props.state){var e=new FormData;void 0!==this.state.image.name&&e.append("picture",this.state.image,this.state.image.name),this.setState({validation:!0});var t=_.a.cloneDeep(_.a.omit(this.state,["id","price","validation","image"])),a=_.a.merge(t,{price:parseInt(this.state.price)});if(e.append("vacationDetails",JSON.stringify(a)),!(0===_.a.filter(t,function(e){return""===e}).length&&null!==this.state.price&&""!==this.state.image&&this.state.toDate>this.state.fromDate))return null;this.props.editVacation(e,this.state.id),this.setState({validation:!1}),this.props.close(),alert("Vacation Succefully Edited!")}else{var n=new FormData;n.append("picture",this.state.image,this.state.image.name),this.setState({validation:!0});var s=_.a.cloneDeep(_.a.omit(this.state,["id","price","image","validation"])),i=_.a.merge(s,{price:parseInt(this.state.price)});if(n.append("vacationDetails",JSON.stringify(i)),!(0===_.a.filter(s,function(e){return""===e}).length&&null!==this.state.price&&""!==this.state.image&&this.state.toDate>this.state.fromDate))return null;this.props.addVacation(n),this.setState({id:0,description:"",destination:"",fromDate:"",toDate:"",price:null,image:"",validation:!1}),this.props.close(),alert("Vacation Succefully Added!")}}},{key:"changeInput",value:function(e,t){this.setState(Object(I.a)({},e,t))}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{class:"container-fluid"},s.a.createElement("div",{class:"row"},s.a.createElement("div",{class:"vacationInputs col m12 s10"},s.a.createElement("div",{class:"row"},s.a.createElement("div",{class:"input-field col m10 offset-m1 s12"},s.a.createElement("input",{id:"destination",value:this.state.destination,type:"text",class:"validate active",onChange:function(t){var a=t.target;return e.changeInput("destination",a.value)}}),s.a.createElement("label",{for:"destination",className:""!==this.state.destination?"active":"validate"},"Destination"),s.a.createElement("div",{style:{color:"red",display:this.state.validation&&""===this.state.destination?"block":"none"}},"Please enter a destination"))),s.a.createElement("div",{class:"row"},s.a.createElement("div",{class:"input-field col m10 offset-m1 s12"},s.a.createElement("textarea",{id:"description",value:this.state.description,class:"active",onChange:function(t){var a=t.target;return e.changeInput("description",a.value)}}),s.a.createElement("label",{for:"description",className:""!==this.state.description?"active":"validate"},"Description"),s.a.createElement("div",{style:{color:"red",display:this.state.validation&&""===this.state.description?"block":"none"}},"Please enter a description"))),s.a.createElement("div",{class:"row"},s.a.createElement("div",{class:"input-field col m10 offset-m1 s12"},s.a.createElement("input",{id:"fromDate",value:this.state.fromDate.substring(0,10),type:"date",class:"validate",onChange:function(t){var a=t.target;return e.changeInput("fromDate",a.value)}}),s.a.createElement("label",{for:"fromDate"},"Starting Date"),s.a.createElement("div",{style:{color:"red",display:this.state.validation&&""===this.state.fromDate?"block":"none"}},"Please enter a starting date"),s.a.createElement("div",{style:{color:"red",display:this.state.validation&&this.state.toDate<this.state.fromDate?"block":"none"}},"Ending date can not be earlier than starting date"))),s.a.createElement("div",{class:"row"},s.a.createElement("div",{class:"input-field col m10 offset-m1 s12"},s.a.createElement("input",{id:"toDate",value:this.state.toDate.substring(0,10),type:"date",class:"validate",onChange:function(t){var a=t.target;return e.changeInput("toDate",a.value)}}),s.a.createElement("label",{for:"toDate"},"Ending Date"),s.a.createElement("div",{style:{color:"red",display:this.state.validation&&""===this.state.toDate?"block":"none"}},"Please enter an ending date"),s.a.createElement("div",{style:{color:"red",display:this.state.validation&&this.state.toDate<this.state.fromDate?"block":"none"}},"Ending date can not be earlier than starting date"))),s.a.createElement("div",{class:"row"},s.a.createElement("div",{class:"input-field col m10 offset-m1 s12"},s.a.createElement("input",{id:"price",value:this.state.price,type:"number",class:"validate",onChange:function(t){var a=t.target;return e.changeInput("price",a.value)}}),s.a.createElement("label",{for:"price",className:this.state.price>=0?"active":""},"Price"),s.a.createElement("div",{style:{color:"red",display:this.state.validation&&(null===this.state.destination||this.state.price<=0)?"block":"none"}},"Please enter a valid price"))),s.a.createElement("div",{class:"row"},s.a.createElement("div",{class:"file-field input-field col m10 offset-m1 s12"},s.a.createElement("div",{class:"btn"},s.a.createElement("span",null,"Image Upload"),s.a.createElement("input",{id:"img",type:"file",class:"validate",onChange:function(t){var a=t.target;return e.changeInput("image",a.files[0])}}),s.a.createElement("div",{style:{color:"red",display:this.state.validation&&""===this.state.image?"block":"none"}},"Please upload an image")),s.a.createElement("div",{class:"file-path-wrapper hide-on-small-only"},s.a.createElement("input",{class:"file-path validate",type:"text"})))),s.a.createElement("div",{class:"row"},s.a.createElement("button",{class:"btn waves-effect waves-light s12",value:this.state.image,type:"submit",name:"action",onClick:function(){return e.vacationHandler(e.state)}},"Submit")))))}},{key:"componentDidMount",value:function(){void 0!==this.props.state?this.setState({id:this.props.state.id,description:this.props.state.description,destination:this.props.state.destination,fromDate:this.props.state.fromDate,toDate:this.props.state.toDate,price:this.props.state.price,image:this.props.state.image}):this.setState({id:0,description:"",destination:"",fromDate:"",toDate:"",price:"",image:""})}}]),t}(s.a.Component),W=Object(S.b)(null,function(e){return{addVacation:function(t){return e((a=t,function(e){return v.a.put("http://localhost:4000/vacations/api/main/",a,{headers:{"Content-Type":"multipart/form-data"}}).then(function(t){t.data,e(P())}).catch(function(e){return console.log(e)})}));var a},editVacation:function(t,a){return e((n=t,s=a,function(e){return v.a.patch("http://localhost:4000/vacations/api/main/edit/".concat(s),n,{headers:{"Content-Type":"multipart/form-data"}}).then(function(t){t.data,e(P())}).catch(function(e){return console.log(e)})}));var n,s}}})(K),Z=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={id:0,description:"",destination:"",fromDate:"",toDate:"",price:0,image:"",modalOpen:!1,checked:!1},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"followClick",value:function(e,t){this.setState({checked:!this.state.checked}),this.props.handleFollow(this.props.userId,this.state.id,!this.state.checked)}},{key:"deleteClick",value:function(e){this.props.deleteVacation(e)}},{key:"onOpenModal",value:function(){this.setState({modalOpen:!0})}},{key:"onCloseModal",value:function(){this.setState({modalOpen:!1})}},{key:"shouldComponentUpdate",value:function(e,t){return this.state.id!==t.id||this.props.followed!==e.followed||this.state!==t||this.state.checked!==t.checked||this.props.data!==e.data}},{key:"render",value:function(){var e=this,t=this.state.modalOpen;return 0===this.props.isAdmin?s.a.createElement("div",{class:"card z-depth-3 sticky-action col s12 hoverable col-content",style:{height:"420px",wordBreak:"break-all"}},s.a.createElement("div",{class:"card-image waves-effect waves-block waves-light"},s.a.createElement("img",{class:"activator",src:"/uploads/".concat(this.state.image),style:{height:"200px",marginTop:"10px"}})),s.a.createElement("div",{class:"card-content"},s.a.createElement("span",{class:"card-title activator grey-text text-darken-4"},this.state.destination,s.a.createElement("i",{class:"material-icons right activator"},"more_vert")),s.a.createElement("p",null,this.state.fromDate.substring(0,10).replace(/-/g,"/")+1," - ",this.state.toDate.substring(0,10).replace(/-/g,"/")),s.a.createElement("p",null,"Price: ",this.state.price,"$")),s.a.createElement("div",{class:"card-action"},s.a.createElement("i",{class:"material-icons hoverable",onClick:function(){return e.followClick(e.props.followed[0].User_Id,e.state.id)}},this.state.checked?"star":"star_border")),s.a.createElement("div",{class:"card-reveal"},s.a.createElement("span",{class:"card-title grey-text text-darken-4"},this.state.destination,s.a.createElement("i",{class:"material-icons right"},"close")),s.a.createElement("p",null,this.state.description))):s.a.createElement("div",{class:"card z-depth-3 sticky-action col s12 hoverable col-content",style:{height:"400px",wordBreak:"break-all"}},s.a.createElement("div",{class:"card-image waves-effect waves-block waves-light"},s.a.createElement("img",{class:"activator",src:"/uploads/".concat(this.state.image),style:{height:"200px",marginTop:"10px"}})),s.a.createElement("div",{class:"card-content"},s.a.createElement("span",{class:"card-title activator grey-text text-darken-4"},this.state.destination,s.a.createElement("i",{class:"material-icons right activator"},"more_vert")),s.a.createElement("p",null,this.state.fromDate.substring(0,10).replace(/-/g,"/")," - ",this.state.toDate.substring(0,10).replace(/-/g,"/")),s.a.createElement("p",null,"Price: ",this.state.price,"$")),s.a.createElement("div",{class:"card-action"},s.a.createElement("i",{class:"material-icons right hoverable",onClick:function(){return e.deleteClick(e.state.id)}},"delete"),s.a.createElement("i",{class:"material-icons left hoverable",onClick:function(){return e.onOpenModal()}},"edit")),s.a.createElement("div",{class:"card-reveal"},s.a.createElement("span",{class:"card-title grey-text text-darken-4"},this.state.destination,s.a.createElement("i",{class:"material-icons right"},"close")),s.a.createElement("p",null,this.state.description)),s.a.createElement("div",{class:"row"},s.a.createElement(H.a,{open:t,onClose:function(){return e.onCloseModal()},center:!0},s.a.createElement(W,{state:this.state,close:function(){return e.onCloseModal()}}))))}},{key:"componentDidUpdate",value:function(e,t){var a,n=this;this.state.id!==t.id&&(a=_.a.filter(this.props.followed[0],function(e){return parseInt(e.Vacation_Id)===parseInt(n.state.id)}).length>0,this.setState({checked:a}));e.data!==this.props.data&&this.setState({id:this.props.data.Vacation_ID,description:this.props.data.Description,destination:this.props.data.Destination,fromDate:this.props.data.From_Date,toDate:this.props.data.To_Date,price:this.props.data.Price,image:this.props.data.Image})}},{key:"componentDidMount",value:function(){this.setState({id:this.props.data.Vacation_ID,description:this.props.data.Description,destination:this.props.data.Destination,fromDate:this.props.data.From_Date,toDate:this.props.data.To_Date,price:this.props.data.Price,image:this.props.data.Image})}}]),t}(s.a.Component),Q=Object(S.b)(function(e){return{userId:e.getUserId}},function(e){return{deleteVacation:function(t){return e(function(e){return function(t){return v.a.patch("http://localhost:4000/vacations/api/main/delete/".concat(e)).then(function(e){e.data,t(P())}).catch(function(e){return console.log(e)})}}(t))},handleFollow:function(t,a,n){return e(function(e,t,a){return function(n){return v.a.patch("http://localhost:4000/vacations/api/main/user",{userId:e,vacationId:t,checked:a}).then(function(e){e.data,n(P())}).catch(function(e){return console.log(e)})}}(t,a,n))}}})(Z),X=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={vacations:[],modalOpen:!1,shouldRefresh:!1},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"shouldComponentUpdate",value:function(e,t){return!_.a.isEqual(e.vacations[0],this.props.vacations[0])||0===this.props.vacations.length||this.state.modalOpen!==t.modalOpen||this.props.userFromCookie!==e.userFromCookie||this.props.isAdmin!==e.isAdmin||this.props.username!==e.username}},{key:"componentDidUpdate",value:function(e,t){0===this.props.userFromCookie.length&&this.props.history.push("/vacations")}},{key:"logout",value:function(){this.props.logout(),this.props.history.push("/vacations")}},{key:"onOpenModal",value:function(){this.setState({modalOpen:!0})}},{key:"onCloseModal",value:function(){this.setState({modalOpen:!1})}},{key:"showGraph",value:function(){console.log(this.props.vacations),this.props.history.push("/vacations/statistics")}},{key:"render",value:function(){var e=this,t=this.state.modalOpen;if(null===this.props.isAdmin||0===this.props.vacations.length||void 0===this.props.vacations[0].followed)return null;var a=this.props.vacations[0].vacations,n=this.props.vacations[0].followed[0],i=_.a.filter(a,function(e){return-1!==_.a.indexOf(_.a.map(n,function(e){return e.Vacation_Id}),e.Vacation_ID)}),o=_.a.union(i,a);return 0===this.props.isAdmin?s.a.createElement("div",{class:"container"},s.a.createElement("div",{class:"head"},s.a.createElement("div",{class:"row"},s.a.createElement("nav",{class:"grey"},s.a.createElement("div",{class:"nav-wrapper col s12"},s.a.createElement("a",{class:"brand-logo left"},s.a.createElement("i",{class:"material-icons"},"account_circle"),this.props.username),s.a.createElement("a",{href:"#","data-target":"mobile-demo",class:"sidenav-trigger right"},s.a.createElement("i",{class:"material-icons"},"menu")),s.a.createElement("ul",{class:"right hide-on-med-and-down"},s.a.createElement("li",{class:"hide-on-small-only"},s.a.createElement("a",{onClick:function(){return e.logout()}},"Logout"))),s.a.createElement("ul",{class:"sidenav",id:"mobile-demo"},s.a.createElement("li",{class:"hide-on-small-only"},s.a.createElement("a",{onClick:function(){return e.logout()}},"Logout"))))))),s.a.createElement("div",{class:"vacations row"},_.a.map(o,function(t,a){return s.a.createElement("div",{key:t.Vacation_ID,id:t.Vacation_ID,class:"card col s12 m6 l4"},s.a.createElement(Q,{data:t,userId:e.props.userId,isAdmin:e.props.isAdmin,followed:e.props.vacations[0].followed}))}))):1===this.props.isAdmin?s.a.createElement("div",{class:"container"},s.a.createElement("div",{class:"navbar-fluid"},s.a.createElement("nav",{class:"grey"},s.a.createElement("div",{class:"nav-wrapper"},s.a.createElement("a",{class:"brand-logo left"},s.a.createElement("i",{class:"material-icons"},"account_circle"),this.props.username),s.a.createElement("ul",{class:"right"},s.a.createElement("li",{class:"hide-on-small-only"},s.a.createElement("a",{onClick:function(){return e.logout()}},"Logout")),s.a.createElement("li",{class:"hide-on-small-only"},s.a.createElement("a",{onClick:function(){return e.onOpenModal()}},"Add Vacation")),s.a.createElement("li",{class:"hide-on-small-only"},s.a.createElement("a",{onClick:function(){return e.showGraph()}},"Statistics"))),s.a.createElement("div",{className:"burger_mobile",style:{marginLeft:"-14%"}},s.a.createElement($.slide,{className:"col s4 hide-on-med-and-up"},s.a.createElement("a",{className:"menu-item",onClick:function(){return e.logout()}},"Logout"),s.a.createElement("a",{className:"menu-item",onClick:function(){return e.onOpenModal()}},"Add Vacation"),s.a.createElement("a",{className:"menu-item",onClick:function(){return e.showGraph()}},"Statistics")))))),s.a.createElement("div",{class:"vacations row"},_.a.map(this.props.vacations[0].vacations,function(t,a){return s.a.createElement("div",{key:t.Vacation_ID,id:t.Vacation_ID,class:"card col s10 m6 l4"},s.a.createElement(Q,{data:t,userid:e.props.userFromCookie,isAdmin:e.props.isAdmin,followed:e.props.vacations[0].followed}))})),s.a.createElement(H.a,{open:t,onClose:function(){return e.onCloseModal()},center:!0},s.a.createElement("div",{class:"row"},s.a.createElement(W,{close:function(){return e.onCloseModal()}})))):void 0}},{key:"componentDidMount",value:function(){_.a.isEmpty(this.props.userFromCookie)&&this.props.history.push("/vacations/"),this.props.getAllVacations()}}]),t}(s.a.Component),Y=Object(S.b)(function(e){return{vacations:e.getVacations,isAdmin:e.isAdmin,username:e.getUsername,userId:e.getUserId,userFromCookie:e.getCookie}},function(e){return{getAllVacations:function(){return e(P())},logout:function(){return e(function(e){return v.a.get("http://localhost:4000/vacations/api/logout").then(function(t){t.data,e(F(!1)),e(j())}).catch(function(e){return console.log(e)})})},checkCookie:function(){return e(j())}}})(X),ee=a(86),te=Object(S.b)(function(e){return{vacations:e.getVacations}},null)(function(e){if(_.a.isEmpty(e.vacations))return null;if(_.a.isEmpty(e.vacations))return null;for(var t=_.a.map(e.vacations[0].vacations,function(e){return e.Destination+" - "+e.Vacation_ID}),a=_.a.map(e.vacations[0].vacations,function(e){return e.NumOfFollowers}),n=["rgba(225, 99, 132, 0.9)","rgba(54, 162, 235, 0.9)","rgba(255, 206, 86, 0.9)","rgba(75, 192, 192, 0.9)","rgba(90, 208, 75, 0.9)","rgba(138, 86, 193, 0.9)","rgba(120, 62, 210, 0.9)","rgba(65, 130, 190, 0.9)","rgba(80, 120, 190, 0.9)","rgba(55, 90, 190, 0.9)"],i=[],o=0;o<t.length;o++)i.push(n[Math.floor(10*Math.random())]);var r={labels:t,datasets:[{data:a,backgroundColor:i}]};return s.a.createElement("div",{className:"chart"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"chartComp col s8 offset-s2"},s.a.createElement(ee.a,{data:r,height:"30%",width:"40%",options:{title:{display:!0,text:"Number of Followers for each Destination",fontSize:30,fontColor:"white",maintainAspectRatio:!1},scales:{yAxes:[{ticks:{beginAtZero:!0,fontColor:"white"}}],xAxes:[{ticks:{fontColor:"white"}}]}}}))),s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"goBack"},s.a.createElement("button",{class:"btn waves-effect waves-light col s6 offset-s3 m3 offset-m5 l2 offset-l5",type:"submit",name:"action",onClick:function(){return e.history.goBack()}},"Main Menu",s.a.createElement("i",{class:"material-icons left"},"send")))))}),ae=Object(f.d)(O,Object(f.a)(A.a)),ne=function(e){function t(){return Object(r.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return s.a.createElement(p.a,null,s.a.createElement(S.a,{store:ae},s.a.createElement(m.a,{exact:!0,path:"/vacations",component:q}),s.a.createElement(m.a,{exact:!0,path:"/vacations/signup",component:J}),s.a.createElement(m.a,{exact:!0,path:"/vacations/main",component:Y}),s.a.createElement(m.a,{exact:!0,path:"/vacations/statistics",component:te})))}}]),t}(s.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(s.a.createElement(ne,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},52:function(e,t,a){e.exports=a.p+"static/media/vacation-clipart-49626.b9897c76.png"},90:function(e,t,a){e.exports=a(235)},95:function(e,t,a){}},[[90,1,2]]]);
//# sourceMappingURL=main.44a4ef4c.chunk.js.map